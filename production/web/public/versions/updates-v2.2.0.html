<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Version 2.2.0 Updates - QuestCord</title>
  <link rel="icon" type="image/png" href="/images/questcord-icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #5865f2;
      --primary-dark: #4752c4;
      --secondary: #7c3aed;
      --bg-dark: #0f0f23;
      --bg-light: #1a1a2e;
      --text-light: #ffffff;
      --text-muted: #b9bbbe;
      --border: rgba(255, 255, 255, 0.1);
      --shadow: rgba(0, 0, 0, 0.3);
      --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: var(--bg-dark);
      line-height: 1.6;
      color: var(--text-light);
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 32px;
      background: var(--bg-light);
      border-radius: 12px;
      border: 1px solid var(--border);
      margin-top: 50px;
      margin-bottom: 50px;
    }

    h1 {
      color: var(--text-light);
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5em;
      font-weight: 700;
    }

    h2 {
      color: var(--text-light);
      border-bottom: 2px solid var(--primary);
      padding-bottom: 10px;
      margin-top: 40px;
      font-weight: 600;
    }

    h3 {
      color: var(--primary);
      font-weight: 600;
      margin-top: 30px;
      margin-bottom: 15px;
    }

    p, li {
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    ul {
      padding-left: 20px;
    }

    li {
      margin-bottom: 8px;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--gradient);
      color: var(--text-light);
      padding: 16px 32px;
      border-radius: 12px;
      text-decoration: none;
      transition: all 0.3s ease;
      font-weight: 600;
      font-size: 16px;
      box-shadow: 0 8px 32px rgba(88, 101, 242, 0.3);
      border: none;
    }

    .back-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(88, 101, 242, 0.4);
      text-decoration: none;
      color: var(--text-light);
    }

    .back-button::before {
      content: '‚Üê';
      font-size: 18px;
      transition: transform 0.3s ease;
    }

    .back-button:hover::before {
      transform: translateX(-4px);
    }

    .version-header {
      background: var(--gradient);
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      margin-bottom: 30px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: block;
      color: var(--text-light);
    }

    .version-header:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(88, 101, 242, 0.4);
      text-decoration: none;
      color: var(--text-light);
    }

    .version-number {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .release-date {
      opacity: 0.9;
      font-size: 1.1rem;
    }

    .update-section {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .update-category {
      display: inline-block;
      background: var(--primary);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .update-category.improvement {
      background: #2ECC71;
    }

    .update-category.new {
      background: #3498DB;
    }

    .update-category.fix {
      background: #E74C3C;
    }

    .update-category.security {
      background: #E67E22;
    }

    .update-category.performance {
      background: #9B59B6;
    }

    .feature-list {
      list-style: none;
      padding: 0;
    }

    .feature-list li {
      position: relative;
      padding-left: 30px;
      margin-bottom: 12px;
      color: var(--text-light);
    }

    .feature-list li::before {
      content: '‚ú®';
      position: absolute;
      left: 0;
      top: 0;
    }

    .feature-list.improvements li::before {
      content: 'üîß';
    }

    .feature-list.fixes li::before {
      content: 'üêõ';
    }

    .feature-list.security li::before {
      content: 'üîí';
    }

    .feature-list.performance li::before {
      content: '‚ö°';
    }

    .feature-list.new li::before {
      content: 'üÜï';
    }

    .technical-note {
      background: rgba(124, 58, 237, 0.1);
      border-left: 4px solid var(--secondary);
      padding: 16px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .technical-note p {
      margin: 0;
      color: var(--text-light);
    }

    .current-badge {
      background: #27AE60;
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-left: 8px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

  </style>
</head>
<body>
  <div class="container">
    <a href="/updates" class="version-header">
      <div class="version-number">Version 2.2.0 <span class="current-badge">Current</span></div>
      <div class="release-date">Released: September 29, 2025</div>
    </a>

    <div class="update-section">
      <div class="update-category fix">CRITICAL BUG FIXES</div>
      <h3>üêõ Recent Bug Fixes (Latest)</h3>
      <ul class="feature-list fixes">
        <li><strong>Database Schema Fixed</strong> - Resolved missing closing brace in config.json game object causing JSON parse errors</li>
        <li><strong>Travel History Errors Resolved</strong> - Fixed "NOT NULL constraint failed: travel_history.travelTime" by removing problematic recordTravel function</li>
        <li><strong>Achievements System Removed</strong> - Removed deprecated achievements table queries preventing status page errors</li>
        <li><strong>Schema Conflicts Fixed</strong> - Removed duplicate travel_history table definition causing database conflicts</li>
        <li><strong>Nullable Columns Updated</strong> - Made toServerName and startedAt columns nullable in travel_history to prevent constraint errors</li>
        <li><strong>Port Configuration Fixed</strong> - Changed web server default port to 80 for proper production deployment</li>
        <li><strong>Live Activity Display Fixed</strong> - Players now show actual Discord usernames instead of "Unknown User" in live activity widget</li>
        <li><strong>User Interface Updates</strong> - Changed "Happy Users" label to "Users" on homepage statistics</li>
        <li><strong>Travel History Timestamp Column Added</strong> - Fixed "no such column: timestamp" errors by adding timestamp and created_at columns to travel_history table</li>
        <li><strong>System Settings Table Created</strong> - Fixed "no such table: system_settings" errors by creating system_settings table for boss spawn scheduling</li>
        <li><strong>Discord Client ID Fixed</strong> - Updated deploy-commands.js to support both DISCORD_CLIENT_ID and CLIENT_ID environment variables</li>
      </ul>
    </div>

    <div class="update-section">
      <div class="update-category security">SECURITY & STABILITY</div>
      <h3>üîí Enhanced Security & Error Handling</h3>
      <ul class="feature-list security">
        <li><strong>Input Sanitization</strong> - Comprehensive review and improvement of all user input validation</li>
        <li><strong>SQL Injection Prevention</strong> - Enhanced parameterized queries and input validation across all database operations</li>
        <li><strong>Error Handling</strong> - Improved error handling in boss spawning, travel systems, and command processing</li>
        <li><strong>Configuration Validation</strong> - Added startup validation to ensure all required configuration values are present</li>
        <li><strong>Environment Documentation</strong> - Created comprehensive .env.example file for secure deployment setup</li>
      </ul>
    </div>

    <div class="update-section">
      <div class="update-category performance">PERFORMANCE IMPROVEMENTS</div>
      <h3>‚ö° System Optimization & Performance</h3>
      <ul class="feature-list performance">
        <li><strong>Database Indexing</strong> - Added strategic indexes on frequently queried columns for faster database operations</li>
        <li><strong>Response Time Optimization</strong> - Implemented intelligent caching for frequently accessed data</li>
        <li><strong>Rate Limiting</strong> - Added command rate limiting to prevent spam and ensure fair resource usage</li>
        <li><strong>Enhanced Metrics</strong> - Improved system monitoring and performance tracking capabilities</li>
        <li><strong>Health Check Improvements</strong> - More detailed and accurate system component health monitoring</li>
      </ul>
    </div>

    <div class="update-section">
      <div class="update-category new">NEW FEATURES</div>
      <h3>üÜï Game Features & Enhancements</h3>
      <ul class="feature-list new">
        <li><strong>Server-Specific Boss Notifications</strong> - Boss spawns now notify individual server channels instead of global spam</li>
        <li><strong>Travel History System</strong> - Players can now view their travel history and past journeys</li>
        <li><strong>Server Discovery Command</strong> - New command to browse and search available servers for travel</li>
        <li><strong>Command Cooldown Indicators</strong> - Users now see remaining cooldown times in command responses</li>
        <li><strong>Simple Badge System</strong> - New lightweight milestone and achievement tracking system</li>
        <li><strong>User Notification Preferences</strong> - Players can customize which notifications they receive</li>
      </ul>
    </div>

    <div class="update-section">
      <div class="update-category improvement">QUALITY OF LIFE</div>
      <h3>üîß User Experience Improvements</h3>
      <ul class="feature-list improvements">
        <li><strong>Enhanced Help System</strong> - Interactive tutorial system for new users with step-by-step guidance</li>
        <li><strong>Better Error Messages</strong> - More helpful and user-friendly error messages across all commands</li>
        <li><strong>Command Aliases</strong> - Added shorter aliases for frequently used commands</li>
        <li><strong>Emoji Standardization</strong> - Consistent emoji usage across all commands and messages</li>
        <li><strong>Boss Rewards Balancing</strong> - Reviewed and improved boss loot distribution system</li>
        <li><strong>Mobile Web Responsiveness</strong> - Improved mobile experience for all web interface pages</li>
      </ul>
    </div>

    <div class="update-section">
      <div class="update-category fix">INFRASTRUCTURE & MAINTENANCE</div>
      <h3>üêõ System Infrastructure</h3>
      <ul class="feature-list fixes">
        <li><strong>Automated Database Backups</strong> - Implemented automatic backup system for data protection</li>
        <li><strong>Log Rotation System</strong> - Proper log management to prevent disk space issues</li>
        <li><strong>Debug Code Cleanup</strong> - Removed temporary debug logging from production code</li>
        <li><strong>Configuration Documentation</strong> - Comprehensive environment variable documentation</li>
        <li><strong>Deployment Improvements</strong> - Enhanced deployment process and environment management</li>
      </ul>
    </div>

    <div class="technical-note">
      <p><strong>üîß Technical Note:</strong> Version 2.2.0 represents a major stability and security release focused on production readiness. This update includes comprehensive security hardening, performance optimizations, and quality of life improvements based on user feedback. The new features are designed to enhance the player experience while maintaining system reliability and security.</p>
    </div>

    <div class="technical-note">
      <p><strong>‚ö†Ô∏è Deployment Notes:</strong> This version introduces configuration validation that may require updating your environment variables. Please review the new .env.example file and ensure all required variables are properly set before deployment. The database will automatically receive new indexes on startup.</p>
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <a href="/updates" class="back-button">Back to Updates</a>
    </div>
  </div>

  <!-- QuestCord Standalone Footer -->
  <div id="footer-container"></div>
  <script src="../shared/footer.js"></script>

</body>
</html>